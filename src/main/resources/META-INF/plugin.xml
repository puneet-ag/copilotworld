<idea-plugin>
    <id>com.dpworld.chatgpt</id>
    <name>VISION</name>
    <vendor email="test@gmail.com" url="">Puneet Agarwal</vendor>
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends optional="true" config-file="plugin-java.xml">com.intellij.modules.java</depends>

    <projectListeners>
        <listener topic="com.intellij.codeInsight.lookup.LookupManagerListener"
                  class="com.dpworld.copilotworld.panel.converted.MethodNameLookupListener"/>
        <listener topic="com.intellij.openapi.wm.ex.ToolWindowManagerListener"
                  class="com.dpworld.copilotworld.panel.converted.ChatToolWindowListener"/>
    </projectListeners>

    <extensions defaultExtensionNs="com.intellij">
        <postStartupActivity implementation="com.dpworld.copilotworld.panel.VisionProjectActivity"/>
        <postStartupActivity implementation="com.dpworld.copilotworld.panel.converted.VisionUpdateActivity"/>
        <applicationConfigurable id="settings.vision" parentId="tools" displayName="Vision"
                                 instance="com.dpworld.copilotworld.panel.converted.GeneralSettingsConfigurable"/>
<!--        <applicationConfigurable id="settings.vision.services" parentId="settings.vision" displayName="Providers"-->
<!--                                 instance="com.dpworld.copilotworld.panel.ServiceConfigurable"/>-->
        <applicationConfigurable id="settings.vision.services.ollama" parentId="settings.vision" displayName="Model Server"
                                 instance="com.dpworld.copilotworld.panel.converted.OllamaSettingsConfigurable"/>
<!--        <applicationConfigurable id="settings.vision.configuration" parentId="settings.vision" displayName="Configuration"-->
<!--                                 instance="com.dpworld.copilotworld.panel.converted.ConfigurationConfigurable"/>-->
<!--        <applicationConfigurable id="settings.vision.advanced" parentId="settings.vision" displayName="Advanced Settings"-->
<!--                                 instance="com.dpworld.copilotworld.advanced.AdvancedSettingsConfigurable"/>-->

        <applicationService serviceImplementation="com.dpworld.copilotworld.panel.converted.GeneralSettings"/>
        <applicationService serviceImplementation="com.dpworld.copilotworld.model.OllamaSettings"/>
        <applicationService serviceImplementation="com.dpworld.copilotworld.panel.converted.ConfigurationSettings"/>
        <applicationService serviceImplementation="com.dpworld.copilotworld.advanced.AdvancedSettings"/>
        <applicationService serviceImplementation="com.dpworld.copilotworld.panel.converted.ConversationsState"/>
        <applicationService serviceImplementation="com.dpworld.copilotworld.panel.converted.IncludedFilesSettings"/>

        <inline.completion.provider
                id="VisionInlineCompletionProvider"
                implementation="com.dpworld.copilotworld.panel.VisionInlineCompletionProvider"/>
        <toolWindow id="Vision" icon="com.dpworld.copilotworld.panel.converted.Icons.DefaultSmall" anchor="right"
                    factoryClass="com.dpworld.copilotworld.panel.converted.ProjectToolWindowFactory"/>
        <notificationGroup id="Vision Notification Group" displayType="BALLOON" key="notification.group.name"/>
        <notificationGroup id="Vision Notification Group Sticky" displayType="STICKY_BALLOON" key="notification.group.sticky.name"/>
        <statusBarWidgetFactory order="first" id="com.dpworld.copilotworld.panel.converted.statusbar.widget"
                                implementation="com.dpworld.copilotworld.panel.converted.VisionStatusBarWidgetFactory"/>
    </extensions>

    <resource-bundle>messages.vision</resource-bundle>

    <actions>
        <group id="VisionEditorPopup">
            <group id="action.editor.group.EditorActionGroup"
                   text="Vision"
                   class="com.intellij.openapi.actionSystem.DefaultActionGroup"
                   popup="true"
                   icon="com.dpworld.copilotworld.panel.converted.Icons.DefaultSmall">
            </group>
            <add-to-group group-id="EditorPopupMenu1" anchor="first"/>
            <separator/>
        </group>
        <action id="Vision.TriggerEditorPopup"
                class="com.dpworld.copilotworld.panel.converted.ShowEditorActionGroupAction"
                text="Show Vision Actions">
            <keyboard-shortcut first-keystroke="ctrl shift alt m" keymap="$default"/>
        </action>
        <group id="Vision.ProjectViewPopupMenuRootGroup">
            <group id="Vision.ProjectViewPopupMenuGroup"
                   text="Vision"
                   class="com.intellij.openapi.actionSystem.DefaultActionGroup"
                   popup="true"
                   icon="com.dpworld.copilotworld.panel.converted.Icons.DefaultSmall">
                <action
                        id="Vision.IncludeFilesInContextAction"
                        class="com.dpworld.copilotworld.panel.converted.IncludeFilesInContextAction" />
            </group>
            <add-to-group
                    group-id="ProjectViewPopupMenu"
                    relative-to-action="ProjectViewPopupMenuRefactoringGroup"
                    anchor="before"/>
            <separator/>
        </group>

        <action
                id="vision.openSettings"
                text="Open Settings"
                class="com.dpworld.copilotworld.panel.converted.OpenSettingsAction">
            <override-text place="MainMenu" text="Open Settings"/>
            <override-text place="popup" use-text-of-place="MainMenu"/>
        </action>
        <action
                id="statusbar.enableCompletions"
                class="com.dpworld.copilotworld.actions.EnableCompletionsAction">
            <keyboard-shortcut first-keystroke="ctrl shift alt c" keymap="$default"/>

            <override-text place="MainMenu"/>
            <override-text place="popup" use-text-of-place="MainMenu"/>
        </action>
        <action
                id="statusbar.disableCompletions"
                class="com.dpworld.copilotworld.actions.DisableCompletionsAction">
            <keyboard-shortcut first-keystroke="ctrl shift alt c" keymap="$default"/>

            <override-text place="MainMenu"/>
            <override-text place="popup" use-text-of-place="MainMenu"/>
        </action>
<!--        <action-->
<!--                id="statusbar.startServer"-->
<!--                class="panel.converted.StartServerAction">-->
<!--            <keyboard-shortcut first-keystroke="ctrl shift alt s" keymap="$default"/>-->

<!--            <override-text place="MainMenu"/>-->
<!--            <override-text place="popup" use-text-of-place="MainMenu"/>-->
<!--        </action>-->
<!--        <action-->
<!--                id="statusbar.stopServer"-->
<!--                class="panel.converted.StopServerAction">-->
<!--            <keyboard-shortcut first-keystroke="ctrl shift alt s" keymap="$default"/>-->

<!--            <override-text place="MainMenu"/>-->
<!--            <override-text place="popup" use-text-of-place="MainMenu"/>-->
<!--        </action>-->

        <group id="vision.statusBarPopup">
            <reference id="vision.openSettings" />
            <separator/>
<!--            <reference id="statusbar.stopServer" />-->
<!--            <reference id="statusbar.startServer" />-->
            <reference id="statusbar.disableCompletions" />
            <reference id="statusbar.enableCompletions" />
        </group>

<!--        <group id="Vision.GenerateGitCommitMessageGroup">-->
<!--            <add-to-group group-id="Vcs.MessageActionGroup" anchor="first"/>-->
<!--            <action-->
<!--                    id="Vision.GenerateGitCommitMessage"-->
<!--                    class="ee.carlrobert.vision.actions.GenerateGitCommitMessageAction" />-->
<!--        </group>-->
    </actions>
</idea-plugin>
